<h1 class="row">
	{{restaurant.name}}
</h1>
<div class="row">
	<tabset class="col-xs-12">
		<tab heading="基本信息">
			<hr class="space" />
			<div class="panel panel-default">
				<div class="panel-body">
					<p>{{restaurant.restaurantDescription}}</p>
					<p>电话:&nbsp;&nbsp;{{restaurant.phone.phone}}&nbsp;&nbsp;&nbsp;&nbsp;    邮件:&nbsp;&nbsp;{{restaurant.email}} </p>
					<p>地址:&nbsp;&nbsp;{{restaurant.address.state}}{{restaurant.city}}{{restaurant.address.street}}{{restaurant.zipcode}}&nbsp;&nbsp;&nbsp;&nbsp;    网址:&nbsp;&nbsp;{{restaurant.website}}</p>
				</div>
			</div>
		</tab>
		<tab heading="菜单">
			<h2>
				<span ng-show="saved === true">所有改动已同步<span>
				<span ng-show="saved === false">同步失败，刚才的改动尚未保存，请尝试手动同步<span>
				<span ng-show="saved === 'saving'">同步中</span>
			</h2>
			<div class="col-xs-12">
				<div class="panel panel-default">
					<form name="newCategoryForm" novalidate>
						<div class="panel-heading">
							<span class="glyphicon glyphicon-plus" ng-hide="addingNewItem" ng-click="addNewItem()"></span>
							<div class="row" ng-show="addingNewItem">
								<div class="col-xs-4">
									<input class="form-control" ng-model="newModel.category.categoryName" ng-show="addingNewItem" placeholder="类别名" required name="fCategoryName"/>
									<div ng-show="newCategoryForm.fCategoryName.$dirty && newCategoryForm.fCategoryName.$error.required">
										请输入类别名
									</div>
								</div>
								<div class="col-xs-8">
									<input class="form-control" ng-model="newModel.category.categoryDescription" ng-show="addingNewItem" placeholder="类别描述"/>
								</div>
							</div>
						</div>
						<ul class="list-group" ng-show="addingNewItem">
							<li class="list-group-item">
								<div class="row">
									<div class="col-xs-3">
										<input class="form-control" ng-model="newModel.item.itemName" placeholder="菜名" required name="fItemName"/>
										<div ng-show="newCategoryForm.fItemName.$dirty && newCategoryForm.fItemName.$error.required">
											请输入菜名
										</div>
									</div>
									<div class="col-xs-5">
										<input class="form-control" ng-model="newModel.item.itemDescription" placeholder="描述"/>
									</div>
									<div class="col-xs-2">
										<input class="form-control" ng-model="newModel.item.price" placeholder="价格" name="fPrice" required smart-float/>
										<div ng-show="newCategoryForm.fPrice.$dirty && !newCategoryForm.fPrice.$valid">
											请输入正确的价格
										</div>
									</div>
									<div class="col-xs-2">
										<div class="pull-right">
											<button class="btn btn-primary" ng-click="cancelAddItem()">
												<span class="glyphicon glyphicon-remove pull-right"></span>
											</button>
											<button class="btn btn-primary" ng-click="confirmAddItem()" ng-disabled="!newCategoryForm.$valid">
												<span class="glyphicon glyphicon-ok pull-right"></span>
											</button>
										</div>
									</div>
								</div>
							</li>
						</ul>
					</form>
				</div>
				<div ng-repeat="category in menu.menuCategories" class="panel panel-default" ng-controller="menuCategoryController">
					<div class="panel-heading">
						<div class="row">
							<form name="categoryEditForm" novalidate>
								<div class="col-xs-3">
									<span ng-hide="editing">{{category.categoryName}}</span>
									<input class="form-control" ng-show="editing" ng-model="nameModified" name="fName" required/>
									<div ng-show="categoryEditForm.fName.$dirty && categoryEditForm.fName.$error.required">
										请输入类别名
									</div>
								</div>
								<div class="small col-xs-7">
									<span ng-hide="editing">{{category.categoryDescription}}</span>
									<input class="form-control" ng-show="editing" ng-model="descriptionModified" />
								</div>
								<div class="col-xs-2">
									<div class="pull-right" ng-hide="editing">
										<span class="glyphicon glyphicon-edit" ng-click="editCategory()"></span>
										<span class="glyphicon glyphicon-plus" ng-click="addNewItem()"></span>
									</div>
									<div class="pull-right" ng-show="editing">
										<button class="btn btn-primary" ng-click="cancelEditCategory()">
											<span class="glyphicon glyphicon-remove pull-right"></span>
										</button>
										<button class="btn btn-primary" ng-click="confirmEditCategory()" ng-disabled="!categoryEditForm.$valid">
											<span class="glyphicon glyphicon-ok pull-right"></span>
										</button>
									</div>
								</div>
							</form>
						</div>
					</div>
					<ul class="list-group">
						<li class="list-group-item" ng-repeat="item in category.items" ng-controller="menuItemController" ng-hide="item.deleted === true">
							<div class="row">
								<div class="col-xs-3">
									<span ng-hide="editing">{{item.itemName}}</span>
									<input ng-show="editing" ng-model="newItem.itemName" class="form-control" />
								</div>
								<div class="col-xs-6">
									<span ng-hide="editing">{{item.itemDescription}}</span>
									<input ng-show="editing" ng-model="newItem.itemDescription" class="form-control"/>
								</div>
								<div class="col-xs-1">
									<span ng-hide="editing">{{item.price}}</span>
									<input ng-show="editing" ng-model="newItem.price" class="form-control"/>
								</div>
								<div class="col-xs-2">
									<div class="pull-right" ng-hide="editing">
										<span class="glyphicon glyphicon-edit" ng-click="editItem()"></span>
										<span class="glyphicon glyphicon-minus" ng-click="removeItem($index)"></span>
									</div>
									<div class="pull-right" ng-show="editing">
										<button class="btn btn-primary" ng-click="cancelEditItem()">
											<span class="glyphicon glyphicon-remove pull-right"></span>
										</button>
										<button class="btn btn-primary" ng-click="confirmEditItem()">
											<span class="glyphicon glyphicon-ok pull-right"></span>
										</button>
									</div>
								</div>
							</div>
						</li>
						<li class="list-group-item" ng-show="addingNewItem">
							<div class="row">
								<form name="newForm" novalidate>
								<div class="col-xs-3">
									<input class="form-control" ng-model="newItem.itemName" name="fName" required/>
									<div class="alert alert-danger" ng-show="newForm.fName.$dirty && newForm.fName.$error.required">
										请输入菜名
									</div>
								</div>
								<div class="col-xs-5">
									<input class="form-control" ng-model="newItem.itemDescription" />
								</div>
								<div class="col-xs-2">
									<input class="form-control" ng-model="newItem.price" name="fPrice" required smart-float/>
									<div class="alert alert-danger" ng-show="newForm.fPrice.$dirty && !newForm.fPrice.$valid">
										<div ng-show="!newForm.fPrice.$valid">请输入正确的价格</div>
									</div>
								</div>
								<div class="col-xs-2">
									<div class="pull-right">
										<button class="btn btn-primary" ng-click="cancelAddItem()">
											<span class="glyphicon glyphicon-remove pull-right"></span>
										</button>
										<button class="btn btn-primary" ng-click="confirmAddItem()" ng-disabled="!newForm.$valid">
											<span class="glyphicon glyphicon-ok pull-right"></span>
										</button>
									</div>
								</div>
								</form>
							</div>
						</li>
					</ul>
				</div>
			</div>
		</tab>

		<tab heading="评论">
			<hr class="space" />
			<div ng-controller="reviewListController" class="list-group">
				<div ng-repeat="review in reviewList" class="list-group-item">
					<div class="row">
						<div class="col-xs-2">
							{{review.userId}}
						</div>
						<div class="col-xs-5">
							{{review.reviewMessage}}
						</div>
						<div class="col-xs-3">
							{{review.reviewTime * 1000 | date:'medium'}}
						</div>
						<div class="col-xs-2">
							<rating value="review.rating" readonly="true"></rating>
						</div>
					</div>
				</div>
			</div>
		</tab>
	</tabset>
</div>