<h4>
    <button class="btn btn-info" ng-click="goBack()"><span class="glyphicon glyphicon-chevron-left"></span></button>
	<span class="glyphicon glyphicon-home">&nbsp;{{restaurant.name}}</span>
</h4>
<hr />
<div class="row">
	<tabset class="col-xs-12">
		<tab heading="基本信息">
			<hr class="space" />
            <div class="panel panel-default">
				<div class="panel-body">
					<form name="basicInforForm" novalidation class="row">
						<div class="col-xs-12">
							<label class="control-label">描述</label>
							<input class="form-control" placeholder="描述" ng-model="newInfo.restaurantDescription" ng-disabled="!editing"/>
						</div>
						<hr class="space"/>
						<div class="col-xs-4">
							<label class="control-label">电话</label>
							<input class="form-control" placeholder="电话" ng-model="newInfo.phone.phone" ng-disabled="!editing"/>
						</div>
						<div class="col-xs-4">
							<label class="control-label">邮件</label>
							<input class="form-control" placeholder="邮件" ng-model="newInfo.email" ng-disabled="!editing"/>
						</div>
						<div class="col-xs-4">
							<label class="control-label">网址</label>
							<input class="form-control" placeholder="网址" ng-model="newInfo.website" ng-disabled="!editing"/>
						</div>
						<hr class="space" />
						<div class="col-xs-8">
							<label class="control-label">地址</label>
							<input class="form-control" placeholder="地址" ng-model="newInfo.address.street" ng-disabled="!editing"/>
						</div>
						<div class="col-xs-1">
							<label class="control-label">市</label>
							<input class="form-control" placeholder="地址" ng-model="newInfo.address.city" ng-disabled="!editing"/>
						</div>
						<div class="col-xs-1">
							<label class="control-label">省</label>
							<input class="form-control" placeholder="地址" ng-model="newInfo.address.state" ng-disabled="!editing"/>
						</div>
						<div class="col-xs-2">
							<label class="control-label">邮编</label>
							<input class="form-control" placeholder="地址" ng-model="newInfo.address.zipcode" ng-disabled="!editing"/>
						</div>
					</form>
				</div>
				<div class="panel-footer">
					<button class="btn btn-primary btn-sm" ng-hide="editing" ng-click="edit()">编辑</button>
					<span ng-show="editing">
						<button class="btn btn-primary btn-sm" ng-click="confirm()">确定</button>
						<button class="btn btn-primary btn-sm" ng-click="cancel()">取消</button>
					</span>
				</div>
			</div>
		</tab>

		<tab heading="菜单" ng-controller="menuController">
			<h2>
				<span ng-show="saved === true">所有改动已同步</span>
				<span ng-show="saved === false">同步失败，刚才的改动尚未保存，请尝试手动同步</span>
				<span ng-show="saved === 'saving'">同步中</span>
			</h2>
			<div class="col-xs-12">
				<div class="panel panel-default">
					<form name="newCategoryForm" novalidate>
						<div class="panel-heading">
							<span class="glyphicon glyphicon-plus" ng-hide="addingNewItem" ng-click="addNewItem()"></span>
							<div class="row" ng-show="addingNewItem">
								<div class="col-xs-4">
									<input class="form-control" ng-model="newCategoryCategory.categoryName" ng-show="addingNewItem" placeholder="类别名" required name="fCategoryName"/>
									<div class="alert alert-danger" ng-show="newCategoryForm.fCategoryName.$dirty && newCategoryForm.fCategoryName.$error.required" >
										请输入类别名
									</div>
								</div>
								<div class="col-xs-8">
									<input class="form-control" ng-model="newCategoryCategory.categoryDescription" ng-show="addingNewItem" placeholder="类别描述"/>
								</div>
							</div>
						</div>
						<div class="panel-body" ng-show="addingNewItem">
							<div class="row">
								<div class="col-xs-3">
									<input class="form-control" ng-model="newCategoryItem.itemName" placeholder="菜名" required name="fItemName"/>
									<div class="alert alert-danger" ng-show="newCategoryForm.fItemName.$dirty && newCategoryForm.fItemName.$error.required">
										请输入菜名
									</div>
								</div>
								<div class="col-xs-5">
									<input class="form-control" ng-model="newCategoryItem.itemDescription" placeholder="描述"/>
								</div>
								<div class="col-xs-2">
									<input class="form-control" ng-model="newCategoryItem.price" placeholder="价格" name="fPrice" required smart-float/>
									<div class="alert alert-danger" ng-show="newCategoryForm.fPrice.$dirty && !newCategoryForm.fPrice.$valid">
										请输入正确的价格
									</div>
								</div>
								<div class="col-xs-2">
									<div class="pull-right">
										<button class="btn btn-primary" ng-click="cancelAddItem()">
											<span class="glyphicon glyphicon-remove pull-right"></span>
										</button>
										<button class="btn btn-primary" ng-click="confirmAddItem()" ng-disabled="!newCategoryForm.$valid">
											<span class="glyphicon glyphicon-ok pull-right"></span>
										</button>
									</div>
								</div>
							</div>
						</div>
					</form>
				</div>

				<div ng-repeat="category in menu.menuCategories" class="panel panel-default" ng-controller="menuCategoryController">
					<div class="panel-heading">
						<div class="row">
							<form name="categoryEditForm" novalidate>
								<div class="col-xs-3">
                                    <a data-toggle="collapse" data-target="#{{category.categoryId}}"
                                       href="" class="collapse" ng-click="toggleMenuCategory(category.categoryId)" data-parent="menu">
                                        <span ng-hide="editing">{{category.categoryName}}</span>
                                    </a>
									<input class="form-control" ng-show="editing" ng-model="nameModified" name="fName" required/>
									<div class="alert alert-danger" ng-show="categoryEditForm.fName.$dirty && categoryEditForm.fName.$error.required">
										请输入类别名
									</div>
								</div>
								<div class="small col-xs-7">
									<span ng-hide="editing">{{category.categoryDescription}}</span>
									<input class="form-control" ng-show="editing" ng-model="descriptionModified" />
								</div>
								<div class="col-xs-2">
									<div class="pull-right" ng-hide="editing">
										<span class="glyphicon glyphicon-edit" ng-click="editCategory()"></span>
										<span class="glyphicon glyphicon-plus" ng-click="addNewItem()"></span>
									</div>
									<div class="pull-right" ng-show="editing">
										<button class="btn btn-primary" ng-click="cancelEditCategory()">
											<span class="glyphicon glyphicon-remove pull-right"></span>
										</button>
										<button class="btn btn-primary" ng-click="confirmEditCategory()" ng-disabled="!categoryEditForm.$valid">
											<span class="glyphicon glyphicon-ok pull-right"></span>
										</button>
									</div>
								</div>
							</form>
						</div>
					</div>
					<ul class="list-group collapse" id="{{category.categoryId}}">
						<li class="list-group-item" ng-repeat="item in category.items" ng-controller="menuItemController" ng-hide="item.deleted === true">
							<div class="row">
								<div class="col-xs-3">
									<span ng-hide="editing">{{item.itemName}}</span>
									<input ng-show="editing" ng-model="newItem.itemName" class="form-control" />
								</div>
								<div class="col-xs-6">
									<span ng-hide="editing">{{item.itemDescription}}</span>
									<input ng-show="editing" ng-model="newItem.itemDescription" class="form-control"/>
								</div>
								<div class="col-xs-1">
									<span ng-hide="editing">{{item.price}}</span>
									<input ng-show="editing" ng-model="newItem.price" class="form-control"/>
								</div>
								<div class="col-xs-2">
									<div class="pull-right" ng-hide="editing">
										<span class="glyphicon glyphicon-edit" ng-click="editItem()"></span>
										<span class="glyphicon glyphicon-minus" ng-click="removeItem($index)"></span>
									</div>
									<div class="pull-right" ng-show="editing">
										<button class="btn btn-primary" ng-click="cancelEditItem()">
											<span class="glyphicon glyphicon-remove pull-right"></span>
										</button>
										<button class="btn btn-primary" ng-click="confirmEditItem()">
											<span class="glyphicon glyphicon-ok pull-right"></span>
										</button>
									</div>
								</div>
							</div>
						</li>
						<li class="list-group-item" ng-show="addingNewItem">
							<div class="row">
								<form name="newForm" novalidate>
								<div class="col-xs-3">
									<input class="form-control" ng-model="newItem.itemName" name="fName" required/>
									<div class="alert alert-danger" ng-show="newForm.fName.$dirty && newForm.fName.$error.required">
										请输入菜名
									</div>
								</div>
								<div class="col-xs-5">
									<input class="form-control" ng-model="newItem.itemDescription" />
								</div>
								<div class="col-xs-2">
									<input class="form-control" ng-model="newItem.price" name="fPrice" required smart-float/>
									<div class="alert alert-danger" ng-show="newForm.fPrice.$dirty && !newForm.fPrice.$valid">
										<div ng-show="!newForm.fPrice.$valid">请输入正确的价格</div>
									</div>
								</div>
								<div class="col-xs-2">
									<div class="pull-right">
										<button class="btn btn-primary" ng-click="cancelAddItem()">
											<span class="glyphicon glyphicon-remove pull-right"></span>
										</button>
										<button class="btn btn-primary" ng-click="confirmAddItem()" ng-disabled="!newForm.$valid">
											<span class="glyphicon glyphicon-ok pull-right"></span>
										</button>
									</div>
								</div>
								</form>
							</div>
						</li>
					</ul>
				</div>
			</div>
		</tab>

		<tab heading="评论">
			<hr class="space" />
			<div ng-controller="reviewListController" class="list-group">
				<div ng-repeat="review in reviewList" class="list-group-item" ng-controller="reviewItemController">
					<div class="row">
						<div class="col-xs-2">
							{{review.userId}}
						</div>
						<div class="col-xs-5">
							{{review.reviewMessage}}
						</div>
						<div class="col-xs-2">
							{{review.reviewTime * 1000 | date:'medium'}}
						</div>
						<div class="col-xs-2">
							<rating value="review.rating" readonly="true"></rating>
						</div>
						<div class="col-xs-1">
							<button class="btn btn-primary btn-sm" ng-click="reply()" ng-show="!review.replyMessage">回复</button>
						</div>
						<div class="col-xs-12" ng-show="review.replyMessage">
							<hr />
							回复信息: {{review.replyMessage}}
						</div>
						<div class="col-xs-12" ng-show="replying">
							<hr />
							<form name="replyReviewForm" novalidate>
								<div class="col-xs-10">
									<input class="form-control" ng-model="message" name="fMessage" required/>
									<div class="alert alert-danger" ng-show="replyReviewForm.fMessage.$dirty && replyReviewForm.fMessage.$error.required">
										请输入评论
									</div>
								</div>
								<div class="col-xs-2">
									<div class="pull-right">
										<button class="btn btn-primary" ng-click="cancelReply()">
											<span class="glyphicon glyphicon-remove pull-right"></span>
										</button>
										<button class="btn btn-primary" ng-click="confirmReply()" ng-disabled="!replyReviewForm.$valid">
											<span class="glyphicon glyphicon-ok pull-right"></span>
										</button>
									</div>
								</div>
							</form>
						</div>
					</div>
				</div>
				<pagination total-items="restaurant.reviewCount" boundary-links="true" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;" page="currentPage" on-select-page="selectPage(page)" items-per-page="10"></pagination>
			</div>
		</tab>
	</tabset>
</div>