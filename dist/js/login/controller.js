/*! ppz_website 2015-01-12 6:55:00 PM */
"use strict";define(function(a){var b=a("app");a("./service"),a("public/local/reservation-service"),b.controller("loginController",["$scope","loginService","$window","$location","$cookies","reservationService",function(a,b,c,d,e,f){a.getUserName=function(){return e.username},a.resetPasswordForm={userName:""},a.submitted=!1,a.initResetInfo=function(){a.resetPasswordForm.userName="",a.resetStatus=a.REQUEST_STATUS.INIT,a.submitted=!1},a.resetStatus=a.REQUEST_STATUS.INIT,a.resetPassword=function(c){a.submitted=!0,c&&(a.resetStatus=a.REQUEST_STATUS.REQUESTING,b.resetPassword(a.resetPasswordForm.userName,function(){a.resetStatus=a.REQUEST_STATUS.REQUEST_SUCCESSED},function(b){a.resetStatus=a.REQUEST_STATUS.REQUEST_FAILED,a.resetHint=b.message}))},a.loginStatus=a.REQUEST_STATUS.INIT,a.performLogin=function(){a.loginHintShow=!0,a.loginStatus=a.REQUEST_STATUS.REQUESTING,b.login(a.username,a.password).then(function(b){a.loginStatus=a.REQUEST_STATUS.REQUEST_SUCCESSED,console.log("login result "+b),console.log("token "+e.token),d.path("/myRestaurants"),f.connect()},function(b){a.loginStatus=a.REQUEST_STATUS.REQUEST_FAILED,console.log("login failed "+b)})},a.logout=function(){b.logout(function(){location.reload()})}}])});