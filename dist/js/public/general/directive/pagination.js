/*! ppz_website 2015-02-10 10:45:23 AM */
"use strict";define("public/general/directive/pagination",["app","public/local/system","public/local/http"],function(a){var b=a("app"),c=a("public/local/system");a("public/local/http"),b.directive("selfPagination",["httpService",function(a){return{restrict:"E",replace:!0,templateUrl:c.getTplAbsolutePath("tpl/directive/pagination.html"),scope:{paginationScope:"="},link:function(b,c){function d(a){b.searchResult=a,b.searchResult.pageCount=parseInt((parseInt(a.count)+a.pageSize-1)/a.pageSize),b.searchResult.pageInfo=e(b.searchResult.pageCount,a.page),angular.forEach(a,function(a){angular.isArray(a)&&a.forEach(function(a,c){a.order=b.searchResult.pageSize*b.searchResult.page-b.searchResult.pageSize+1+c})})}function e(a,b){var c=b-5;1>c&&(c=1);for(var d=[],e=0;10>e&&a>=c+e;++e)d.push(c+e);return{pageRange:d,last:1==b?!1:b-1,next:b==a?!1:b+1}}$(c);b.paginationScope=b,b.goPage=function(c){c!==!1&&(void 0===c?b.searchForm.page=b.searchForm.page||1:c&&(b.searchForm.page=c),b.$emit("searchStart"),a.get({r:b.searchInterface,data:b.searchForm,success:function(a){d(a),b.$emit("searchEnd",a)},error:function(a){b.$emit("searchFail",a)}}))},b.autoSearch&&(b.goPage=1)}}}])});