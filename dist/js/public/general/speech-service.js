/*! ppz_website 2015-02-03 11:00:22 AM */
"use strict";define("public/general/speech-service",["app"],function(a){var b=a("app"),c=["$q",function(a){return{getVoices:function(){var b=a.defer(),c=speechSynthesis.getVoices();if(0===c.length)var d=setInterval(function(){c=speechSynthesis.getVoices(),0!==c.length&&(clearInterval(d),b.resolve(c))},0);else b.resolve(c);return b.promise},createMsg:function(a){return new SpeechSynthesisUtterance(a)},getNativeVoice:function(){return this.getVoices().then(function(a){var b;return a.some(function(a){return"native"===a.name||a.localService===!0?(b=a,!0):void 0}),b})},speak:function(a){a.voice||this.getNativeVoice().then(function(b){a.voice=b,console.log("voice:",b),speechSynthesis.speak(a),a.onstart=function(){console.log("speech:start",a)},a.onend=function(){console.log("speech:end",a)}})}}}];b.service("speechService",c)});